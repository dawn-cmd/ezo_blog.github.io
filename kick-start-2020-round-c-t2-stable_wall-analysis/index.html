<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Kick Start 2020 Round C T2 Stable_Wall Analysis | ezo&#39;s blog</title>
<meta name="description" content="People who know nothing repeat it.">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://dawn-cmd.github.io/favicon.ico?v=1596122512342">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dawn-cmd.github.io/styles/main.css">


<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://dawn-cmd.github.io">ezo&#39;s blog</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="https://dawn-cmd.github.io" class="menu">
                Homepage
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                Archives
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                Tags
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                About
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>Kick Start 2020 Round C T2 Stable_Wall Analysis</h1>
            <p class="article-meta">
              2020-07-30
              
                <a href="https://dawn-cmd.github.io/OPRCr9F-Y/" class="badge warning">
                  Solution
                </a>
              
            </p>
            
            <div class="post-content">
              <!-- more -->
<h2 id="before-the-passage">Before the passage</h2>
<p>I think the data of this problem should be strengthened. Because of the weak data, many people can solve the problem via a very stupid way(<s>me</s>). the details will be furnished in the following passage. However, the ratio of people who passed the problem is lower than the one in other contemporary rounds, it is unbelievable.</p>
<h2 id="official-link">Official link</h2>
<p><a href="https://codingcompetitions.withgoogle.com/kickstart/round/000000000019ff43/00000000003379bb">Here</a></p>
<h2 id="problem">Problem</h2>
<p>Apollo is playing a game involving polyominos. A polyomino is a shape made by joining together one or more squares edge to edge to form a single connected shape. The game involves combining N polyominos into a single rectangular shape without any holes. Each polyomino is labeled with a unique character from A to Z.</p>
<p>Apollo has finished the game and created a rectangular wall containing R rows and C columns. He took a picture and sent it to his friend Selene. Selene likes pictures of walls, but she likes them even more if they are stable walls. A wall is stable if it can be created by adding polyominos one at a time to the wall so that each polyomino is always supported. A polyomino is supported if each of its squares is either on the ground, or has another square below it.</p>
<p>Apollo would like to check if his wall is stable and if it is, prove that fact to Selene by telling her the order in which he added the polyominos.</p>
<h2 id="input">Input</h2>
<p>The first line of the input gives the number of test cases, T. T test cases follow. Each test case begins with a line containing the two integers R and C. Then, R lines follow, describing the wall from top to bottom. Each line contains a string of C uppercase characters from A to Z, describing that row of the wall.</p>
<h2 id="output">Output</h2>
<p>For each test case, output one line containing Case #x: y, where x is the test case number (starting from 1) and y is a string of N uppercase characters, describing the order in which he built them. If there is more than one such order, output any of them. If the wall is not stable, output -1 instead.</p>
<h2 id="limits">Limits</h2>
<p>Time limit: 20 seconds per test set.<br>
Memory limit: 1GB.<br>
1 ≤ T ≤ 100.<br>
1 ≤ R ≤ 30.<br>
1 ≤ C ≤ 30.<br>
No two polyominos will be labeled with the same letter.<br>
The input is guaranteed to be valid according to the rules described in the statement.</p>
<h2 id="test-set-1">Test set 1</h2>
<p>1 ≤ N ≤ 5.</p>
<h2 id="test-set-2">Test set 2</h2>
<p>1 ≤ N ≤ 26.</p>
<h2 id="sample">Sample</h2>
<h3 id="input-2">Input</h3>
<p>4</p>
<p>4 6</p>
<p>ZOAAMM</p>
<p>ZOAOMM</p>
<p>ZOOOOM</p>
<p>ZZZZOM</p>
<p>4 4</p>
<p>XXOO</p>
<p>XFFO</p>
<p>XFXO</p>
<p>XXXO</p>
<p>5 3</p>
<p>XXX</p>
<p>XPX</p>
<p>XXX</p>
<p>XJX</p>
<p>XXX</p>
<p>3 10</p>
<p>AAABBCCDDE</p>
<p>AABBCCDDEE</p>
<p>AABBCCDDEE</p>
<h3 id="output-2">Output</h3>
<p>Case #1: ZOAM</p>
<p>Case #2: -1</p>
<p>Case #3: -1</p>
<p>Case #4: EDCBA</p>
<h3 id="explainatoin">Explainatoin</h3>
<p>In sample case #1, note that ZOMA is another possible answer.</p>
<p>In sample case #2 and sample case #3, the wall is not stable, so the answer is -1.</p>
<p>In sample case #4, the only possible answer is EDCBA.</p>
<h2 id="analysis">Analysis</h2>
<ol>
<li>
<p>O(n!) solution:We can list all the possible order that the polyominos being set in and then check them one by one.</p>
</li>
<li>
<p>O(n to n!) solution:<s>this is the stupid way</s>When I was solving the problem, I used DFS technique(Deep-First-Search) to address it. Specifically, I imitated the process of setting polyomino: I determined which polyomino I should put one by one, when there exist problems, we back to the previous step and try another way. Because N is specially small, this solution can be accepted narrowly.</p>
</li>
<li>
<p>O(R * C) solution:So this is the best solution. Literally, when a polyomino is totally or partly above another polyomino, the upper one should be set after the lower one restrictly. When it happpens, we can consider these two polyominos as two vertexs, and build an edge directed from the lower one to the upper one. We proceed all the polyominos by this way, in the end, we can get a graph. All we need to do is to find a topological sort of the graph. About topological sort, if you do not know it very well, I will write another blog and share the link here to explain it soon.</p>
</li>
</ol>
<h2 id="code-of-my-solution">Code of my solution</h2>
<pre><code class="language-cpp">#include&lt;bits/stdc++.h&gt;
using namespace std;
int T;
int r;
int c;
string ans;
string mp[31];
string lit;
map&lt;char,int&gt; h;
bool check(){
    for(int i=1;i&lt;r;++i){
        for(int j=0;j&lt;c;++j){
            if(h[mp[i][j]]==0&amp;&amp;h[mp[i-1][j]]==1){
                return 0;
            }
        }
    }
    return 1;
}
void dfs(string now){
    if(now.length()==lit.length()){
        ans=now;
        return;
    }
    if(ans!=&quot;-1&quot;){
        return;
    }
    for(int i=0;i&lt;lit.length();++i){
        if(h[lit[i]]==1){
            continue;
        }
        h[lit[i]]=1;
        if(check()){
            dfs(now+lit[i]);
        }
        h[lit[i]]=0; 
    } 
}
int main(){
    cin&gt;&gt;T;
    for(int P=1;P&lt;=T;++P){
        cin&gt;&gt;r&gt;&gt;c;
        lit=&quot;&quot;;
        h.erase(h.begin(),h.end());
        for(int i=0;i&lt;r;++i){
            cin&gt;&gt;mp[i];
            for(int j=0;j&lt;c;++j){
                if(h[mp[i][j]]==0){
                    h[mp[i][j]]=1;
                    lit+=mp[i][j];
                }
            }
        }
        h.erase(h.begin(),h.end());
        ans=&quot;-1&quot;;
        dfs(&quot;&quot;);
        cout&lt;&lt;&quot;Case #&quot;&lt;&lt;P&lt;&lt;&quot;: &quot;&lt;&lt;ans&lt;&lt;endl;
    }
    return 0;
}
</code></pre>
<h2 id="code-of-the-best-solution">Code of the best solution</h2>
<pre><code class="language-cpp">#include&lt;bits/stdc++.h&gt;
using namespace std;
int r;
int c;
string mp[1000];
vector&lt;int&gt; graph[1000];
int incnt[1000];
int n;
string ans;
map&lt;char,int&gt; h;
void topo(){
    queue&lt;int&gt; q;
    for(int i=1;i&lt;=30;++i){
        if(incnt[i]==0&amp;&amp;h[(char)(i+'A'-1)]){
            q.push(i);
        }
    }
    while(!q.empty()){
        int x=q.front();
        ans+=(char)(x+'A'-1);
        q.pop();
        for(int i=0;i&lt;graph[x].size();++i){
            int y=graph[x][i];
            incnt[y]--;
            if(incnt[y]==0){
                q.push(y);
            }
        }
    }
    return;
}
int main(){
    int T;
    cin&gt;&gt;T;
    for(int P=1;P&lt;=T;++P){
        cin&gt;&gt;r&gt;&gt;c;
        n=0;
        h.erase(h.begin(),h.end());
        for(int i=0;i&lt;r;++i){
            cin&gt;&gt;mp[i];
            for(int j=0;j&lt;c;++j){
                if(h[mp[i][j]]==0){
                    h[mp[i][j]]=1;
                    ++n;
                }
            }
        }
        memset(incnt,0,sizeof incnt);
        map&lt;pair&lt;int,int&gt;,int&gt; he;
        for(int i=1;i&lt;=30;++i){
            graph[i].clear();
        }
        for(int i=1;i&lt;r;++i){
            for(int j=0;j&lt;c;++j){
                if(mp[i][j]!=mp[i-1][j]){
                    int x=mp[i][j]-'A'+1;
                    int y=mp[i-1][j]-'A'+1;
                    if(he[make_pair(x,y)]==0){
                        graph[x].push_back(y);
                        he[make_pair(x,y)]=1;
                        ++incnt[y];
                    } 
                }
            }
        }
        ans=&quot;&quot;;
        topo();
        if(ans.length()&lt;n){
            cout&lt;&lt;&quot;Case #&quot;&lt;&lt;P&lt;&lt;&quot;: &quot;&lt;&lt;&quot;-1&quot;&lt;&lt;endl;
        }
        else{
            cout&lt;&lt;&quot;Case #&quot;&lt;&lt;P&lt;&lt;&quot;: &quot;&lt;&lt;ans&lt;&lt;endl;
        }
    }
    return 0;
}
</code></pre>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
        </div>
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://dawn-cmd.github.io/images/avatar.png?v=1596122512342" class="no-responsive avatar">
    <div class="text-muted">People who know nothing repeat it.</div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      Latest Passage
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://dawn-cmd.github.io/o_E2mKnup/">Topological Sort</a>
            </li>
          
        
          
            <li>
              <a href="https://dawn-cmd.github.io/kick-start-2020-round-c-t1-countdown-analysis/">Kick Start 2020 Round C T1 Countdown Analysis</a>
            </li>
          
        
          
            <li>
              <a href="https://dawn-cmd.github.io/kick-start-2020-round-c-t2-stable_wall-analysis/">Kick Start 2020 Round C T2 Stable_Wall Analysis</a>
            </li>
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      List of Tags
    </div>
    <div class="row">
      
        <a href="https://dawn-cmd.github.io/T9dinVrg_/" class="badge secondary">
          Note
        </a>
      
        <a href="https://dawn-cmd.github.io/OPRCr9F-Y/" class="badge success">
          Solution
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/dawn-cmd" target="_blank">ezo</a> | <a class="rss" href="https://dawn-cmd.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>




  </body>
</html>
